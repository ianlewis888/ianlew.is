<html>
<title>Airplane Crash Map</title>
<script src="https://d3js.org/d3.v4.min.js"></script>
<style>
    #map-container {
        width: 100%;
        height: 100%;
    }

    .d3-tip {
      line-height: 1;
      font-weight: bold;
      padding: 12px;
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
      border-radius: 2px;
      position: absolute;
    }

    circle {
      fill: #4EA5D9;
    }

    circle:hover {
      fill: #88C6EA;
    }
</style>
<div id="map-container">
</div>
<script type="text/javascript">
  var mapData = d3.json("custom.geo.json", createMap);

  function createMap(d) {
    var mapData = d,
      projection = d3.geoEquirectangular().scale(230).center([-50,40]),
      path = d3.geoPath(projection),
      svg = d3.select("#map-container")
          .append("svg")
          .attr("width","100%")
          .attr("height","100%"),
      fillColor = "#E5E5E5",
      strokeColor = "#8F9199",
      point = {
        "coords": [38.758648, 8.989123],
        "data": "I am the point"
      },
     tip = d3.select("body").append("div")
      .attr("class", "d3-tip")
      .style("opacity", 0);

    svg.selectAll("path")
      .data(mapData.features)
      .enter()
      .append("path")
      .attr("d", path)
      .attr("fill", fillColor)
      .attr("stroke", strokeColor)
      .attr("stroke-width", "0.5");

    svg.selectAll("circle")
      .data([point])
      .enter()
      .append("circle")
      .attr("cx", function (d) { return projection(d.coords)[0]; })
		  .attr("cy", function (d) { return projection(d.coords)[1]; })
      .attr("r","5")
      .attr("fill","#4EA5D9")
      .attr("stroke","black")
      .attr("stroke-width", "0.5")
      .on("mouseover", function(d){

        tip.transition()
          .duration(200)
          .style("opacity", .9);

        tip.text(d.data)
          .style("left", (d3.event.pageX + 20) + "px")
          .style("top", (d3.event.pageY - 23) + "px");

      })
      .on("mouseout", function(d){

        tip.transition()
          .duration(200)
          .style("opacity", 0);

      });
  };
</script>
</html>
